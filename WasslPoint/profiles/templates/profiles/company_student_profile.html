{% extends 'main/base.html' %}
{% load static %}

{% block title %}{{ profile.company_name }} - ملف الشركة{% endblock %}

{% block style %}
{# Include the CSS used by the student profile page #}
<link rel="stylesheet" href="{% static 'css/profiles.css' %}">
{# Add any additional page-specific styles if needed #}
<style>
    /* Styles adapted from company_student_profile.html or defaults */
    .profile-card .card-img-top.company-logo {
        height: 200px;
        object-fit: contain;
        padding: 1rem;
        background-color: #f8f9fa; /* Light background for logo area */
        /* Removed border-bottom from previous version to match student profile img */
    }
    .profile-card .card-title {
        font-weight: 600; /* Make name bold */
    }
    .profile-card .company-industry {
        font-size: 0.95rem;
        color: #6c757d;
    }
    .profile-card .contact-details p {
        margin-bottom: 0.5rem; /* Spacing between contact items */
        font-size: 0.9rem;
        color: #333;
    }
    .profile-card .contact-details .material-symbols-outlined {
        margin-inline-end: 8px;
        vertical-align: middle; /* Align icon better */
        color: #555;
        font-size: 1.2em;
    }

    /* Card styles for right column */
    .info-card .card-header {
        background-color: #fff; /* White header like student profile */
        color: #000;
        font-weight: bold;
        padding: 0.75rem 1.25rem; /* Standard padding */
        border-bottom: 1px solid #dee2e6;
        font-size: 1.1rem; /* Slightly larger header font */
    }
     .info-card .card-header .material-symbols-outlined {
        vertical-align: middle; /* Align icon in header */
        margin-inline-end: 8px;
     }
    .info-card .card-body {
        padding: 1.25rem;
    }
    .info-card dt {
        font-weight: 600;
        color: #555;
        padding-bottom: 0.5rem; /* Add spacing below label */
    }
    .info-card dd {
        margin-bottom: 1rem; /* Space between definition items */
        color: #333;
        word-wrap: break-word;
    }
     .info-card dd a {
        word-break: break-all;
    }
    .not-available {
        color: #888;
        font-style: italic;
    }
     .material-symbols-outlined { /* General icon alignment */
        vertical-align: text-bottom;
        font-size: 1.1em;
     }
     /* Ensure profile.css styles like bg-orange etc are defined if used */
</style>
{% endblock %}

{% block content %}
<div class="container py-5">
  <div class="row gx-4"> {# Two-column layout #}

    {# --- Left Column: Basic Info Card --- #}
    <div class="col-lg-4 mb-4">
      <div class="card profile-card shadow-sm"> {# Use profile-card class #}
        <img
          src="{{ profile.logo.url }}"
          class="card-img-top company-logo" {# Specific class for company logo #}
          alt="شعار {{ profile.company_name }}"
        />
        <div class="card-body text-center">
          <h4 class="card-title mt-2 mb-2">{{ profile.company_name }}</h4>
          <p class="company-industry mb-3">
            {% if profile.industry %}
                <span class="material-symbols-outlined" style="font-size: 1em;">business_center</span>
                {{ profile.industry.name }} {# Assuming 'name' field for Industry #}
            {% else %}
                <span class="not-available">المجال غير محدد</span>
            {% endif %}
          </p>
          <hr> {# Separator like in student profile #}
          <div class="contact-details text-start px-2"> {# Wrapper for contact info #}
              <p>
                <span class="material-symbols-outlined">location_city</span>
                {% if profile.city %}
                    {{ profile.city.arabic_name }} {# Assuming 'arabic_name' field #}
                {% else %}
                    <span class="not-available">المدينة غير محددة</span>
                {% endif %}
              </p>
               <p>
                  <span class="material-symbols-outlined">pin_drop</span>
                  {% if profile.address_line %}
                      {{ profile.address_line }}
                  {% else %}
                      <span class="not-available">العنوان غير محدد</span>
                  {% endif %}
               </p>
               <p>
                   <span class="material-symbols-outlined">link</span>
                   {% if profile.company_url %}
                       <a href="{{ profile.company_url }}" target="_blank" rel="noopener noreferrer">الموقع الإلكتروني</a>
                   {% else %}
                       <span class="not-available">الموقع الإلكتروني غير متوفر</span>
                   {% endif %}
               </p>
          </div>
        </div>
      </div>
    </div>

    {# --- Right Column: Detailed Cards --- #}
    <div class="col-lg-8">

      {# Company Description Card #}
      <div class="card info-card mb-4 shadow-sm">
        <div class="card-header"> {# Header matching student profile style #}
            <span class="material-symbols-outlined">description</span> وصف الشركة
        </div>
        <div class="card-body">
          {% if profile.company_description %}
              <p>{{ profile.company_description|linebreaksbr }}</p>
          {% else %}
              <p class="not-available">لا يتوفر حاليا</p>
          {% endif %}
        </div>
      </div>

      {# Location/Contact Card #}
       <div class="card info-card mb-4 shadow-sm">
        <div class="card-header">
            <span class="material-symbols-outlined">public</span> تفاصيل الموقع
        </div>
        <div class="card-body">
             <dl class="row mb-0">
                 <dt class="col-sm-12 col-md-4">رابط الموقع على الخريطة:</dt>
                 <dd class="col-sm-12 col-md-8">
                     {% if profile.company_location %}
                         <a href="{{ profile.company_location }}" target="_blank" rel="noopener noreferrer">{{ profile.company_location }}</a>
                     {% else %}
                         <span class="not-available">لا يتوفر حاليا</span>
                     {% endif %}
                 </dd>
                 {# Add other location/contact details here if needed #}
             </dl>
        </div>
      </div>

      {# Registration Info Card #}
      <div class="card info-card mb-4 shadow-sm">
        <div class="card-header">
            <span class="material-symbols-outlined">badge</span> معلومات التسجيل
        </div>
        <div class="card-body">
            <p class="text-muted small mb-3">ملاحظة: هذه المعلومات للمرجعية وقد لا تكون للعرض العام.</p>
            <dl class="row mb-0">
                 <dt class="col-sm-12 col-md-4">رقم السجل التجاري:</dt> {# Adjusted columns #}
                 <dd class="col-sm-12 col-md-8">
                    {% if profile.commercial_register %}
                         {{ profile.commercial_register }}
                    {% else %}
                        <span class="not-available">لا يتوفر حاليا</span>
                    {% endif %}
                 </dd>

                 <dt class="col-sm-12 col-md-4 pt-2">شهادة السجل التجاري:</dt> {# Adjusted columns #}
                 <dd class="col-sm-12 col-md-8 pt-2">
                     {% if profile.crm_certificate %}
                         <a href="{{ profile.crm_certificate.url }}" target="_blank" class="btn btn-sm btn-outline-secondary">
                           <span class="material-symbols-outlined">download</span> عرض/تحميل الشهادة
                         </a>
                     {% else %}
                        <span class="not-available">لا يتوفر حاليا</span>
                     {% endif %}
                 </dd>
            </dl>
        </div>
      </div>

      {# Back Button #}
       <div class="text-center mt-4">
            <a href="{% url 'main:company_view' %}" class="btn btn-outline-secondary">
               <span class="material-symbols-outlined">arrow_back</span> العودة إلى قائمة الشركات
            </a>
       </div>

    </div> {# End Right Column #}
  </div> {# End Row #}
</div> {# End Container #}
{% endblock %}