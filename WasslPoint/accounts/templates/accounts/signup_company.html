{% extends 'main/base.html' %}
{% load static %}

{% block style %}
  <link rel="stylesheet" href="{% static 'css/signup.css' %}">
{% endblock %}

{% block content %}
<section class="signup-page text-center">
  <h2 class="contact-title">
    <span style="color: #FF7C34;">▸▸▸▸▸▸▸▸▸▸</span>
      تسجيل الشركات
    <span style="color: #FF7C34;">◂◂◂◂◂◂◂◂◂◂</span>
  </h2>

  <div class="contact-form-container">
    <form method="post" action="{% url 'accounts:signup_company_view' %}" enctype="multipart/form-data">
      {% csrf_token %}

      <div class="form-group">
        <div class="input-icon">
          <i class="fi fi-rr-pen-field"></i>
                </div>
          <input
          type="text"
          name="commercial_register_number"
          class="form-control-contact orange-border"
          placeholder="السجل التجاري"
          required
        >
      </div>

      <div class="form-group file-group">
        <div class="input-icon"><i class="fi fi-rr-file-pdf"></i></div>
      
        <label
          for="commercial_register_file"
          class="form-control-contact blue-border file-placeholder text-start"
        >
          ملف السجل التجاري
        </label>
      
        <input
          type="file"
          id="commercial_register_file"
          name="commercial_register_file"
          accept="application/pdf"
          style="display: none;"
          onchange="updateFileLabel(this)"
          required
        >
      </div>

      <div class="form-group">
        <div class="input-icon"><i class="fi fi-rr-user"></i></div>
        <input
          type="text"
          name="company_name"
          class="form-control-contact orange-border "
          placeholder="اسم الشركة..."
          required
        >
      </div>
      <div class="form-group file-group">
        <div class="input-icon"><i class="fi fi-rr-picture"></i></div>
      
        <label
          for="logo"
          class="form-control-contact blue-border file-placeholder text-start"
        >
          شعار الشركة (اختياري)
        </label>
      
        <input
          type="file"
          id="logo"
          name="logo"
          accept="image/*"
          style="display: none;"
          onchange="updateFileLabel(this)"
          
        >
      </div>
      <div class="form-group">
        <div class="input-icon"><i class="fi fi-rr-location-alt"></i></div>
        <input
          type="text"
          name="address_line"
          class="form-control-contact orange-border "
          placeholder=" عنوان الشركة (اختياري)"
          
        >
      </div>

      <div class="form-group">
        <div class="input-icon"><i class="fi fi-rr-envelope"></i></div>
        <input
          type="email"
          name="email"
          class="form-control-contact blue-border text-start"
          placeholder="البريد الإلكتروني"
          required
        >
      </div>

      <div class="form-group">
        <div class="input-icon"><i class="fi fi-rr-lock"></i></div>
        <input
          type="password"
          name="password"
          class="form-control-contact orange-border"
          placeholder="كلمة السر…"
          required
        >
      </div>

      <div class="form-group">
        <div class="input-icon"><i class="fi fi-rr-lock"></i></div>
        <input
          type="password"
          name="password2"
          class="form-control-contact orange-border"
          placeholder="تأكيد كلمة السر…"
          required
        >
      </div>

      <div class="form-group">
        <div class="input-icon"><i class="fi fi-rr-angle-down"></i></div>
        <select
          name="industry"
          class="form-control-contact blue-border"
          required
        >
          <option value="" disabled selected>مجال عمل الشركة</option>
          {% for ind in industries %}
            <option value="{{ ind.id }}">{{ ind.name }}</option>
          {% endfor %}
        </select>
      </div>
      
      <div class="form-check form-check-inline justify-content-center mb-4">
        <input
          class="form-check-input"
          type="checkbox"
          id="terms"
          name="terms"
          required
        >
        <label class="form-check-label" for="terms">
          الشروط والأحكام
        </label>
      </div>
      
      <div class="extra-links text-center mb-4">
        <a href="{% url 'accounts:login_view' %}">
           سجّل دخولك هنا
        </a>
        <span class="mx-2">|</span>
        <a href="{%url 'accounts:signup_view'%}">تسجيل الطلاب</a>

      </div>
      <!-- زر التسجيل -->
      <button type="submit" class="send-btn w-100">إنشاء حساب</button>

     
    </form>
  </div>
</section>
<script>
  function updateFileLabel(input) {
    const lbl = document.querySelector('.file-placeholder');
    if (input.files && input.files.length) {
      lbl.textContent = input.files[0].name;
    } else {
      lbl.textContent = 'ملف السجل التجاري';
    }
  }
  function updateFileLabel(input) {
    const lbl = document.querySelector(`label[for="${input.id}"]`);
    if (!lbl) return;

    if (input.files && input.files.length > 0) {
      lbl.textContent = input.files[0].name;
    } else {
      lbl.textContent = lbl.dataset.default;
    }
  }
  </script>
{% endblock %}
